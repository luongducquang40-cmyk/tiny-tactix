<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
<title>Dragon Tactix</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/phaser/3.55.2/phaser.min.js"></script>
<style>
html,body{margin:0;padding:0;background:#0c1022;overflow:hidden;}
</style>
</head>
<body>

<script>
window.onload = () => {

const TILE=90,COLS=6,ROWS=4;
let turn="player",selected=null,mapIndex=0;

const MAPS=[
 {name:"Saiyan Plains"},
 {name:"Namek"},
 {name:"Hyperbolic Time"}
];

class Menu extends Phaser.Scene{
 constructor(){super("Menu");}
 create(){
  this.add.text(100,60,"DRAGON TACTIX",{fontSize:"36px",color:"#fff"});

  MAPS.forEach((m,i)=>{
   const btn=this.add.rectangle(200,150+i*70,260,50,0x1f7aec)
    .setInteractive();
   this.add.text(120,135+i*70,m.name,{fontSize:"22px",color:"#fff"});

   btn.on("pointerdown",()=>{
     mapIndex=i;
     this.scene.start("Game");
   });
  });
 }
}

class Unit{
 constructor(scene,x,y,color,owner){
  this.scene=scene;this.x=x;this.y=y;this.owner=owner;
  this.hp=3;
  this.sprite=scene.add.rectangle(x*TILE+45,y*TILE+45,50,50,color)
   .setInteractive();
 }
 adj(o){return Math.abs(this.x-o.x)+Math.abs(this.y-o.y)==1;}
 move(x,y){this.x=x;this.y=y;this.sprite.setPosition(x*TILE+45,y*TILE+45);}
}

class Game extends Phaser.Scene{
 constructor(){super("Game");}
 create(){
  this.units=[];
  for(let y=0;y<ROWS;y++)for(let x=0;x<COLS;x++)
   this.add.rectangle(x*TILE+45,y*TILE+45,TILE-4,TILE-4,0x2c2f5a).setStrokeStyle(2,0xffffff);

  this.units.push(new Unit(this,0,1,0x00ff00,"player"));
  this.units.push(new Unit(this,5,1,0xff0000,"ai"));

  this.info=this.add.text(10,ROWS*TILE+10,"Tap YOUR unit",{fontSize:"20px",color:"#fff"});

  this.input.on("gameobjectdown",(p,obj)=>{
    const u=this.units.find(u=>u.sprite===obj);
    if(!u || u.owner!=="player")return;
    selected=u;
    this.info.setText("Unit selected â†’ tap empty tile");
  });

  this.input.on("pointerdown",p=>{
    if(!selected)return;
    const x=Math.floor(p.x/TILE),y=Math.floor(p.y/TILE);
    selected.move(x,y);
    selected=null;
    this.info.setText("Tap YOUR unit");
  });
 }
}

new Phaser.Game({
 type:Phaser.AUTO,
 width:window.innerWidth,
 height:window.innerHeight,
 backgroundColor:"#0c1022",
 scale:{mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH},
 scene:[Menu,Game]
});

};
</script>
</body>
</html>

